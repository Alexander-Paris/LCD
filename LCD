from RPLCD.i2c import CharLCD
from gpiozero import Button
from time import sleep

# Initialize LCD using I2C
lcd = CharLCD('PCF8574', 0x27)  # Use 0x3F if your module has a different address

# Define Buttons
button_mode = Button(17, pull_up=False)
button_confirm = Button(27, pull_up=False)

# Sorting Modes
modes = ["Value", "Mint", "Year"]
mode_index = 0
confirmed = False

def lcd_update():
    lcd.clear()
    if confirmed:
        lcd.write_string(modes[mode_index].ljust(16))
        lcd.crlf()
        lcd.write_string("Insert Coin".ljust(16))
    else:
        lcd.write_string("Sorting Mode:".ljust(16))
        lcd.crlf()
        lcd.write_string(modes[mode_index].ljust(16))

# Main loop
lcd_update()
while True:
    if button_mode.is_pressed:
        mode_index = (mode_index + 1) % len(modes)
        confirmed = False
        lcd_update()
        sleep(0.3)

    if button_confirm.is_pressed:
        confirmed = True
        lcd_update()
        sleep(0.3)

