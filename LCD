from RPLCD.i2c import CharLCD
from gpiozero import Button
from time import sleep

# LCD Setup (change address if different)
lcd = CharLCD('PCF8574', 0x27)  # Use 0x3F or whatever your I2C address is

# Updated GPIO Pins for Buttons
button_mode = Button(26, pull_up=True)
button_confirm = Button(19, pull_up=True)

# Mode logic
modes = ["Value", "Mint", "Year"]
mode_index = 0
confirmed = False

def lcd_update():
    lcd.clear()
    if confirmed:
        lcd.write_string(modes[mode_index].ljust(16))
        lcd.crlf()
        lcd.write_string("Insert Coin".ljust(16))
    else:
        lcd.write_string("Sorting Mode:".ljust(16))
        lcd.crlf()
        lcd.write_string(modes[mode_index].ljust(16))

lcd_update()

while True:
    if button_mode.is_pressed:
        mode_index = (mode_index + 1) % len(modes)
        confirmed = False
        lcd_update()
        sleep(0.3)  # Debounce delay

    if button_confirm.is_pressed:
        confirmed = True
        lcd_update()
        sleep(0.3)
